
<form class="form-horizontal" *ngIf="workItem">
  <fieldset>
    <div class="f8-detail__header col-xs-12 col-sm-12 col-md-12 padding-0">
      <span
        class="pficon-close pull-right margin-right-5 padding-15">
      </span>
      <div class="width-100 pull-left">
        <div class="col-xs-6 col-sm-4 col-md-3 pull-right text-right">
          <strong>Created </strong>
          <span id="created_at"
          [innerHTML]="workItem.attributes['system.created_at'] ? (workItem.attributes['system.created_at'] | almMomentTime) : 'Creating now!'"></span>
        </div>
        <div class="col-xs-6 col-sm-8 col-md-9">
          <div>
            <span *ngIf="loadingTypes"
              class="spinner spinner-sm spinner-inline">
            </span>
            <span
              *ngIf="!loadingTypes"
              class="{{workItem.relationships?.baseType?.data?.attributes?.icon}} fa-lg dib">
            </span>
            <span
              *ngIf="!loadingTypes"
              class="dib">
              {{workItem.relationships?.baseType?.data?.attributes?.name}}
            </span>
            <span class="dib">
              <strong>#{{workItem.attributes['system.number']}}</strong>
            </span>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 margin-top-15">
          <div class="dropdown" dropdown *ngIf="loggedIn">
            <button class="btn btn-default dropdown-toggle"
              id="wi-detail-state"
              type="button"
              dropdownToggle>
              <span class="fa fa-close"
                almIcon
                [iconType]="workItem.attributes['system.state']">
              </span>
              <span>
                {{workItem.attributes['system.state']}}
              </span>
              <span *ngIf="loggedIn" class="caret dib"></span>
            </button>
            <ul class="dropdown-ul dropdown-menu" role="menu" *dropdownMenu>
              <li class="dropdown-li" (click)="onChangeState(state)"
                *ngFor="let state of workItem.relationships?.baseType?.data?.attributes?.fields['system.state'].type.values;">
                <a>
                  <span class='dropdown-icon' almIcon [iconType]="state"></span>
                  <span class='dropdown-text'>{{state}}</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 margin-top-15">
          <div class="form-horizontal">
            <f8-inlineinput
              [value]="workItem.attributes['system.title']"
              [onLineClickEdit]="false"
              (onSave)="saveTitle($event)">
            </f8-inlineinput>
          </div>
        </div>
      </div>
    </div>
    <div class="f8-detail__detail width-100 pull-left">
      <div class="col-xs-12 col-sm-7 col-md-7 f8-detail__detail-wrap">
        <div class="form-group">
          <!-- assignee -->
          <section class="f8-detail__assignee">
            <label class="col-xs-4 col-sm-4 col-md-2 control-label">
              Assignee
            </label>
            <div class="col-xs-8 col-sm-8 col-md-10">
              Sukhvir
            </div>
          </section>
        </div>
        <!-- area -->
        <div class="form-group">
          <section class="f8-detail__area">
            <label class="col-xs-4 col-sm-4 col-md-2 control-label">
              Area
            </label>
            <div class="col-xs-8 col-sm-8 col-md-10">
              <!--<typeahead-dropdown
                class="area-dropdown">
              </typeahead-dropdown> -->
            </div>
          </section>
        </div>
      </div>
      <div class="col-xs-12 col-sm-5 col-md-5 f8-detail__detail-wrap">
        <alm-work-item-link
          [workItem]="workItem"
          [loggedIn]="loggedIn">
        </alm-work-item-link>
        <alm-work-item-comment
          [comments]="comments"
          [loadingComments]="loadingComments"
          [loggedIn]="loggedIn"
          [loggedInUser]="loggedInUser"
          (create)="createComment($event)"
          (update)="updateComment($event)"
          (delete)="deleteComment($event)">
        </alm-work-item-comment>
      </div>
    </div>
  </fieldset>
</form>
